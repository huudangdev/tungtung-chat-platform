/*

 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in c||(c[d]={});c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof d?a:new d(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){e(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}};d.prototype.createResolveAndReject_=
function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(k){this.reject_(k);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var f=new b;d.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};d.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};d.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(m){g(m)}}:
b}var e,g,f=new d(function(a,b){e=a;g=b});this.callWhenSettled_(c(a,e),c(b,g));return f};d.prototype["catch"]=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(c)};d.resolve=c;d.reject=function(a){return new d(function(b,c){c(a)})};d.race=function(a){return new d(function(b,
d){for(var e=$jscomp.makeIterator(a),g=e.next();!g.done;g=e.next())c(g.value).callWhenSettled_(b,d)})};d.all=function(a){var b=$jscomp.makeIterator(a),e=b.next();return e.done?c([]):new d(function(a,d){function g(b){return function(c){f[b]=c;h--;0==h&&a(f)}}var f=[],h=0;do f.push(void 0),h++,c(e.value).callWhenSettled_(g(f.length-1),d),e=b.next();while(!e.done)})};return d},"es6","es3");
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var d=c++;return{value:b(d,a[d]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var d=b.length,f=c||0;for(0>f&&(f=Math.max(f+d,0));f<d;f++){var g=b[f];if(g===a||Object.is(g,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");var shakaDemo=shakaDemo||{};
shakaDemo.onlineOptGroups_=[];
shakaDemo.setupAssets_=function(){var a=document.getElementById("assetList"),b={},c=null;shakaAssets.testAssets.forEach(function(d){if(!d.disabled){var e=b[d.source];e||(e=document.createElement("optgroup"),e.label=d.source,e.disabled=!navigator.onLine,b[d.source]=e,a.appendChild(e),shakaDemo.onlineOptGroups_.push(e));var g=document.createElement("option");g.textContent=d.name;g.asset=d;e.appendChild(g);d.drm.length&&!d.drm.some(function(a){return shakaDemo.support_.drm[a]})&&(g.disabled=!0);var f=
[];0<=d.features.indexOf(shakaAssets.Feature.WEBM)&&f.push("video/webm");0<=d.features.indexOf(shakaAssets.Feature.MP4)&&f.push("video/mp4");0<=d.features.indexOf(shakaAssets.Feature.MP2TS)&&f.push("video/mp2t");f.some(function(a){return shakaDemo.support_.media[a]})||(g.disabled=!0);g.disabled||e.disabled||(c=c||g,d.focus&&(c=g))}});c&&(c.selected=!0);var e=shakaDemo.setupOfflineAssets_(),d=document.createElement("option");d.textContent="(custom asset)";a.appendChild(d);a.addEventListener("change",
function(){var b=a.options[a.selectedIndex].asset;document.getElementById("customAsset").style.display=b?"none":"block";shakaDemo.hashShouldChange_()});document.getElementById("loadButton").addEventListener("click",shakaDemo.load);document.getElementById("unloadButton").addEventListener("click",shakaDemo.unload);d=[document.getElementById("licenseServerInput"),document.getElementById("manifestInput"),document.getElementById("certificateInput")];d=$jscomp.makeIterator(d);for(var f=d.next();!f.done;f=
d.next())f=f.value,f.addEventListener("input",shakaDemo.onAssetInput_),f.addEventListener("keydown",shakaDemo.onAssetKeyDown_);return e};shakaDemo.onAssetKeyDown_=function(a){"Enter"==a.key&&shakaDemo.load()};shakaDemo.onAssetInput_=function(a){shakaDemo.hashShouldChange_()};shakaDemo.requestCertificate_=function(a){return shakaDemo.player_.getNetworkingEngine().request(shaka.net.NetworkingEngine.RequestType.APP,{uris:[a]}).promise.then(function(a){return a.data})};
shakaDemo.configureCertificate_=function(a){var b=shakaDemo.player_,c=b.getConfiguration(),e={},d;for(d in c.drm.advanced)e[d]={serverCertificate:new Uint8Array(a)};b.configure({drm:{advanced:e}})};
shakaDemo.preparePlayer_=function(a){shakaDemo.closeError();var b=shakaDemo.player_,c=document.getElementById("drmSettingsVideoRobustness").value,e=document.getElementById("drmSettingsAudioRobustness").value,d=["com.widevine.alpha","com.microsoft.playready","com.adobe.primetime","org.w3.clearkey"],f={abr:{},streaming:{},manifest:{dash:{}},drm:{advanced:{}}};d.forEach(function(a){f.drm.advanced[a]={}});f.manifest.dash.clockSyncUri="https://shaka-player-demo.appspot.com/time.txt";if(!a){var g=document.getElementById("licenseServerInput").value,
h={};g&&d.forEach(function(a){h[a]=g});a={manifestUri:document.getElementById("manifestInput").value,licenseServers:h,certificateUri:document.getElementById("certificateInput").value}}b.resetConfiguration();ShakaDemoUtils.setupAssetMetadata(a,b);shakaDemo.castProxy_.setAppData({asset:a});c&&d.forEach(function(a){f.drm.advanced[a].videoRobustness=c});e&&d.forEach(function(a){f.drm.advanced[a].audioRobustness=e});f.preferredAudioLanguage=document.getElementById("preferredAudioLanguage").value;f.preferredTextLanguage=
document.getElementById("preferredTextLanguage").value;d=Number(document.getElementById("preferredAudioChannelCount").value);isNaN(d)||(f.preferredAudioChannelCount=d);d=document.getElementById("availabilityWindowOverride").value;var k=Number(d);!isNaN(k)&&d.length&&(f.manifest.availabilityWindowOverride=k);f.abr.enabled=document.getElementById("enableAdaptation").checked;d=document.getElementById("smallGapLimit").value;!isNaN(Number(d))&&0<d.length&&(f.streaming.smallGapLimit=Number(d));f.streaming.jumpLargeGaps=
document.getElementById("jumpLargeGaps").checked;f.streaming.alwaysStreamText=document.getElementById("showNative").checked;b.configure(f);window.debugConfig&&b.configure(window.debugConfig);return a};shakaDemo.computeDisabledAssets=function(){shakaDemo.onlineOptGroups_.forEach(function(a){a.disabled=!navigator.onLine})};
shakaDemo.load=function(){var a=document.getElementById("assetList"),b=shakaDemo.player_,c=shakaDemo.preparePlayer_(a.options[a.selectedIndex].asset);shakaDemo.localVideo_.poster=shakaDemo.mainPoster_;a=Promise.resolve();c.certificateUri&&(a=shakaDemo.requestCertificate_(c.certificateUri).then(shakaDemo.configureCertificate_));a.then(function(){return b.load(c.manifestUri,shakaDemo.startTime_)}).then(function(){shakaDemo.controls_.loadComplete();shakaDemo.hashShouldChange_();b.isAudioOnly()&&(shakaDemo.localVideo_.poster=
shakaDemo.audioOnlyPoster_);var a=0==c.manifestUri.indexOf("offline:");shakaDemo.controls_.allowCast(!a);(c.extraText||[]).forEach(function(a){b.addTextTrack(a.uri,a.language,a.kind,a.mime,a.codecs)});"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:c.name}))},function(a){if(a.code==shaka.util.Error.Code.LOAD_INTERRUPTED)console.debug("load() interrupted");else shakaDemo.onError_(a)});shakaDemo.video_.play()};shakaDemo.unload=function(){shakaDemo.player_.unload()};var shakaAssets={Encoder:{UNKNOWN:"Unknown",SHAKA_PACKAGER:"Shaka packager",AXINOM:"Axinom",UNIFIED_STREAMING:"Unified Streaming",WOWZA:"Wowza",BITCODIN:"Bitcodin",NIMBLE_STREAMER:"Nimble Streamer",AZURE_MEDIA_SERVICES:"Azure Media Services",MP4BOX:"MP4Box",APPLE:"Apple",UPLYNK:"Verizon Digital Media Services"},Source:{SHAKA:"Shaka",AXINOM:"Axinom",UNIFIED_STREAMING:"Unified Streaming",DASH_IF:"DASH-IF",WOWZA:"Wowza",BITCODIN:"Bitcodin",NIMBLE_STREAMER:"Nimble Streamer",AZURE_MEDIA_SERVICES:"Azure Media Services",
GPAC:"GPAC",UPLYNK:"Verizon Digital Media Services"},KeySystem:{CLEAR_KEY:"org.w3.clearkey",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Feature:{SEGMENT_BASE:"SegmentBase",SEGMENT_LIST_DURATION:"SegmentList w/ @duration",SEGMENT_LIST_TIMELINE:"SegmentList w/ SegmentTimeline",SEGMENT_TEMPLATE_DURATION:"SegmentTemplate w/ @duration",SEGMENT_TEMPLATE_TIMELINE:"SegmentTemplate w/ SegmentTimeline",SEGMENT_TEMPLATE_TIMELINE_TIME:"SegmentTemplate w/ SegmentTimeline $Time$",SEGMENT_TEMPLATE_TIMELINE_NUMBER:"SegmentTemplate w/ SegTimeline $Number$",
PSSH:"embedded PSSH",MULTIKEY:"multiple keys",MULTIPERIOD:"multiple Periods",ENCRYPTED_WITH_CLEAR:"mixing encrypted and unencrypted periods",AESCTR_16_BYTE_IV:"encrypted with AES CTR Mode using a 16 byte IV",AESCTR_8_BYTE_IV:"encrypted with AES CTR Mode using a 8 byte IV",TRICK_MODE:"special trick mode track",XLINK:"xlink",SUBTITLES:"subtitles",CAPTIONS:"captions",SEGMENTED_TEXT:"segmented text",EMBEDDED_TEXT:"embedded text",MULTIPLE_LANGUAGES:"multiple languages",OFFLINE:"offline",LIVE:"live",WEBM:"WebM",
MP4:"mp4",MP2TS:"MPEG-2 TS",TTML:"TTML",WEBVTT:"WebVTT",HIGH_DEFINITION:"high definition",ULTRA_HIGH_DEFINITION:"ultra-high definition",SURROUND:"surround sound",HLS:"HLS"},UplynkResponseFilter:function(a,b){a==shaka.net.NetworkingEngine.RequestType.MANIFEST&&(shakaAssets.uplynk_prefix=b.headers["x-uplynk-prefix"]?b.headers["x-uplynk-prefix"]:"")},UplynkRequestFilter:function(a,b){a==shaka.net.NetworkingEngine.RequestType.LICENSE&&(-1!==b.uris[0].indexOf("wv")&&shakaAssets.uplynk_prefix?b.uris[0]=
shakaAssets.uplynk_prefix.concat("/wv"):-1!==b.uris[0].indexOf("ck")&&shakaAssets.uplynk_prefix?b.uris[0]=shakaAssets.uplynk_prefix.concat("/ck"):-1!==b.uris[0].indexOf("pr")&&shakaAssets.uplynk_prefix&&(b.uris[0]=shakaAssets.uplynk_prefix.concat("/pr")))}};
shakaAssets.testAssets=[{name:"Angel One (multicodec, multilingual)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE]},{name:"Angel One (multicodec, multilingual, Widevine)",
manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one-widevine/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE],licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},
{name:"Angel One (multicodec, multilingual, ClearKey server)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one-clearkey/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.CLEAR_KEY],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE],licenseServers:{"org.w3.clearkey":"https://cwip-shaka-proxy.appspot.com/clearkey?_u3wDe7erb7v8Lqt8A3QDQ=ABEiM0RVZneImaq7zN3u_w"}},
{name:"Angel One (HLS, MP4, multilingual)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one-hls/hls.m3u8",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HLS,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.OFFLINE]},{name:"Angel One (HLS, MP4, multilingual, Widevine)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/angel-one-widevine-hls/hls.m3u8",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,
source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.HLS,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.OFFLINE],licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},{name:"Sintel 4k (multicodec)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,
shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE]},{name:"Sintel w/ trick mode (MP4 only, 720p)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-trickplay/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,
shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TRICK_MODE,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE]},{name:"Sintel 4k (WebM only)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-webm-only/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT,
shakaAssets.Feature.OFFLINE]},{name:"Sintel 4k (MP4 only)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-mp4-only/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE]},{name:"Sintel 4k (multicodec, Widevine)",
manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-widevine/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.PSSH,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE],licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},
{name:"Sintel 4k (multicodec, VTT in MP4)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/sintel-mp4-wvtt/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBM,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE]},
{name:"Heliocentrism (multicodec, multiperiod)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/heliocentrism/heliocentrism.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.WEBM,shakaAssets.Feature.OFFLINE]},{name:"Heliocentrism (multicodec, multiperiod, xlink)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/heliocentrism-xlink/heliocentrism.mpd",
encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.WEBM,shakaAssets.Feature.XLINK,shakaAssets.Feature.OFFLINE]},{name:'"Dig the Uke" by Stefan Kartenberg (audio only, multicodec)',manifestUri:"https://storage.googleapis.com/shaka-demo-assets/dig-the-uke-clear/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],
features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.WEBM,shakaAssets.Feature.OFFLINE]},{name:'"Dig the Uke" by Stefan Kartenberg (audio only, multicodec, Widevine)',manifestUri:"https://storage.googleapis.com/shaka-demo-assets/dig-the-uke/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.WEBM,shakaAssets.Feature.OFFLINE],
licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},{name:"Tears of Steel (multicodec, TTML)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/tos-ttml/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TTML,shakaAssets.Feature.WEBM,shakaAssets.Feature.OFFLINE]},
{name:"Tears of Steel (multicodec, surround + stereo)",manifestUri:"https://storage.googleapis.com/shaka-demo-assets/tos-surround/dash.mpd",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.SURROUND,shakaAssets.Feature.WEBM,shakaAssets.Feature.OFFLINE]},{name:"Shaka Player History (multicodec, live, DASH)",manifestUri:"https://storage.googleapis.com/shaka-live-assets/player-source.mpd",
encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.WEBM]},{name:"Shaka Player History (live, HLS)",manifestUri:"https://storage.googleapis.com/shaka-live-assets/player-source.m3u8",encoder:shakaAssets.Encoder.SHAKA_PACKAGER,source:shakaAssets.Source.SHAKA,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,
shakaAssets.Feature.HLS,shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4]},{name:"Multi-DRM",manifestUri:"https://media.axprod.net/TestVectors/v7-MultiDRM-SingleKey/Manifest.mpd",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,
shakaAssets.Feature.WEBVTT],licenseServers:{"com.widevine.alpha":"https://drm-widevine-licensing.axtest.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axtest.net/AcquireLicense"},licenseRequestHeaders:{"X-AxDRM-Message":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiOWViNDA1MGQtZTQ0Yi00ODAyLTkzMmUtMjdkNzUwODNlMjY2IiwiZW5jcnlwdGVkX2tleSI6ImxLM09qSExZVzI0Y3Iya3RSNzRmbnc9PSJ9XX19.4lWwW46k-oWcah8oN18LPj5OLS5ZU-_AQv7fe0JhNjA"}},
{name:"Multi-DRM, multi-key",manifestUri:"https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey/Manifest.mpd",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT],
licenseServers:{"com.widevine.alpha":"https://drm-widevine-licensing.axtest.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axtest.net/AcquireLicense"},licenseRequestHeaders:{"X-AxDRM-Message":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiODAzOTliZjUtOGEyMS00MDE0LTgwNTMtZTI3ZTc0OGU5OGMwIiwiZW5jcnlwdGVkX2tleSI6ImxpTkpxVmFZa05oK01LY3hKRms3SWc9PSJ9LHsiaWQiOiI5MDk1M2UwOS02Y2IyLTQ5YTMtYTI2MC03YTVmZWZlYWQ0OTkiLCJlbmNyeXB0ZWRfa2V5Ijoia1l0SEh2cnJmQ01lVmRKNkxrYmtuZz09In0seyJpZCI6IjBlNGRhOTJiLWQwZTgtNGE2Ni04YzNmLWMyNWE5N2ViNjUzMiIsImVuY3J5cHRlZF9rZXkiOiI3dzdOWkhITE1nSjRtUUtFSzVMVE1RPT0ifSx7ImlkIjoiNTg1ZjIzM2YtMzA3Mi00NmYxLTlmYTQtNmRjMjJjNjZhMDE0IiwiZW5jcnlwdGVkX2tleSI6IkFjNFVVbVl0Qko1blBROU4xNXJjM2c9PSJ9LHsiaWQiOiI0MjIyYmQ3OC1iYzQ1LTQxYmYtYjYzZS02ZjgxNGRjMzkxZGYiLCJlbmNyeXB0ZWRfa2V5IjoiTzZGTzBmcVNXb3BwN2JqYy9ENGxNQT09In1dfX0.uF6YlKAREOmbniAeYiH070HSJhV0YS7zSKjlCtiDR5Y"}},
{name:"Multi-DRM, multi-key, multi-Period",manifestUri:"https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey-MultiPeriod/Manifest.mpd",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,
shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT],licenseServers:{"com.widevine.alpha":"https://drm-widevine-licensing.axtest.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axtest.net/AcquireLicense"},licenseRequestHeaders:{"X-AxDRM-Message":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiMDg3Mjc4NmUtZjllNy00NjVmLWEzYTItNGU1YjBlZjhmYTQ1IiwiZW5jcnlwdGVkX2tleSI6IlB3NitlRVlOY3ZqWWJmc2gzWDNmbWc9PSJ9LHsiaWQiOiJjMTRmMDcwOS1mMmI5LTQ0MjctOTE2Yi02MWI1MjU4NjUwNmEiLCJlbmNyeXB0ZWRfa2V5IjoiLzErZk5paDM4bXFSdjR5Y1l6bnQvdz09In0seyJpZCI6IjhiMDI5ZTUxLWQ1NmEtNDRiZC05MTBmLWQ0YjVmZDkwZmJhMiIsImVuY3J5cHRlZF9rZXkiOiJrcTBKdVpFanBGTjhzYVRtdDU2ME9nPT0ifSx7ImlkIjoiMmQ2ZTkzODctNjBjYS00MTQ1LWFlYzItYzQwODM3YjRiMDI2IiwiZW5jcnlwdGVkX2tleSI6IlRjUlFlQld4RW9IT0tIcmFkNFNlVlE9PSJ9LHsiaWQiOiJkZTAyZjA3Zi1hMDk4LTRlZTAtYjU1Ni05MDdjMGQxN2ZiYmMiLCJlbmNyeXB0ZWRfa2V5IjoicG9lbmNTN0dnbWVHRmVvSjZQRUFUUT09In0seyJpZCI6IjkxNGU2OWY0LTBhYjMtNDUzNC05ZTlmLTk4NTM2MTVlMjZmNiIsImVuY3J5cHRlZF9rZXkiOiJlaUkvTXNsbHJRNHdDbFJUL0xObUNBPT0ifSx7ImlkIjoiZGE0NDQ1YzItZGI1ZS00OGVmLWIwOTYtM2VmMzQ3YjE2YzdmIiwiZW5jcnlwdGVkX2tleSI6IjJ3K3pkdnFycERWM3hSMGJKeTR1Z3c9PSJ9LHsiaWQiOiIyOWYwNWU4Zi1hMWFlLTQ2ZTQtODBlOS0yMmRjZDQ0Y2Q3YTEiLCJlbmNyeXB0ZWRfa2V5IjoiL3hsU0hweHdxdTNnby9nbHBtU2dhUT09In0seyJpZCI6IjY5ZmU3MDc3LWRhZGQtNGI1NS05NmNkLWMzZWRiMzk5MTg1MyIsImVuY3J5cHRlZF9rZXkiOiJ6dTZpdXpOMnBzaTBaU3hRaUFUa1JRPT0ifV19fQ.BXr93Et1krYMVs-CUnf7F3ywJWFRtxYdkR7Qn4w3-to"}},
{name:"Clear, single-Period",manifestUri:"https://media.axprod.net/TestVectors/v7-Clear/Manifest.mpd",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE]},{name:"Clear, multi-Period",manifestUri:"https://media.axprod.net/TestVectors/v7-Clear/Manifest_MultiPeriod.mpd",
encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE]},{name:"Clear, Live DASH",manifestUri:"https://akamai-axtest.akamaized.net/routes/lapd-v1-acceptance/www_c4/Manifest.mpd",
encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.WEBVTT]},{name:"Clear, Live HLS",manifestUri:"https://akamai-axtest.akamaized.net/routes/lapd-v1-acceptance/www_c4/Manifest.m3u8",encoder:shakaAssets.Encoder.AXINOM,source:shakaAssets.Source.AXINOM,drm:[],features:[shakaAssets.Feature.HLS,shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,
shakaAssets.Feature.WEBVTT]},{name:"Tears of Steel",manifestUri:"https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel.ism/.mpd",encoder:shakaAssets.Encoder.UNIFIED_STREAMING,source:shakaAssets.Source.UNIFIED_STREAMING,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.OFFLINE]},{name:"Tears of Steel (Widevine)",manifestUri:"https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-dash-widevine.ism/.mpd",
encoder:shakaAssets.Encoder.UNIFIED_STREAMING,source:shakaAssets.Source.UNIFIED_STREAMING,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION],licenseServers:{"com.widevine.alpha":"https://cwip-shaka-proxy.appspot.com/no_auth"}},{name:"Tears of Steel (PlayReady)",manifestUri:"https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-dash-playready.ism/.mpd",
encoder:shakaAssets.Encoder.UNIFIED_STREAMING,source:shakaAssets.Source.UNIFIED_STREAMING,drm:[shakaAssets.KeySystem.PLAYREADY],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION],licenseServers:{"com.microsoft.playready":"https://test.playready.microsoft.com/service/rightsmanager.asmx?PlayRight=1&UseSimpleNonPersistentLicense=1"}},
{name:"Tears of Steel (subtitles)",manifestUri:"https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-en.ism/.mpd",encoder:shakaAssets.Encoder.UNIFIED_STREAMING,source:shakaAssets.Source.UNIFIED_STREAMING,drm:[],features:[shakaAssets.Feature.EMBEDDED_TEXT,shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.SEGMENTED_TEXT,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.TTML,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,
shakaAssets.Feature.OFFLINE]},{name:"Big Buck Bunny",manifestUri:"https://dash.akamaized.net/dash264/TestCases/1c/qualcomm/2/MultiRate.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.OFFLINE]},{name:"Live sim (2s segments)",manifestUri:"https://livesim.dashif.org/livesim/utc_head/testpic_2s/Manifest.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,
drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},{name:"Live sim SegmentTimeline w $Time$ (6s segments)",manifestUri:"https://livesim.dashif.org/livesim/segtimeline_1/utc_head/testpic_6s/Manifest.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE_TIME]},{name:"Live sim SegmentTimeline w $Number$ (6s segments)",
manifestUri:"https://livesim.dashif.org/livesim/segtimelinenr_1/utc_head/testpic_6s/Manifest.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE_NUMBER]},{name:"Live sim SegmentTimeline StartOver [-20s, +20s] (2s segments)",manifestUri:"https://livesim.dashif.org/livesim/segtimeline_1/startrel_-20/stoprel_20/timeoffset_0/testpic_2s/Manifest.mpd",encoder:shakaAssets.Encoder.UNKNOWN,
source:shakaAssets.Source.DASH_IF,drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE_TIME]},{name:"Live sim StartOver SegTmpl Duration [-20s, +20s] (2s segments)",manifestUri:"https://livesim.dashif.org/livesim/startrel_-20/stoprel_20/timeoffset_0/testpic_2s/Manifest.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},
{name:"Live sim SegTmpl Duration (multi-period 60s)",manifestUri:"https://livesim.dashif.org/livesim/utc_head/periods_60/testpic_2s/Manifest.mpd",encoder:shakaAssets.Encoder.UNKNOWN,source:shakaAssets.Source.DASH_IF,drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},{name:"Big Buck Bunny (Live)",manifestUri:"https://wowzaec2demo.streamlock.net/live/bigbuckbunny/manifest_mpm4sav_mvtime.mpd",encoder:shakaAssets.Encoder.WOWZA,
source:shakaAssets.Encoder.WOWZA,drm:[],features:[shakaAssets.Feature.LIVE,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE]},{name:"Art of Motion (DASH)",manifestUri:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd",encoder:shakaAssets.Encoder.BITCODIN,source:shakaAssets.Source.BITCODIN,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.OFFLINE]},
{name:"Art of Motion (HLS, TS)",manifestUri:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",encoder:shakaAssets.Encoder.BITCODIN,source:shakaAssets.Source.BITCODIN,drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.HLS,shakaAssets.Feature.MP2TS,shakaAssets.Feature.OFFLINE]},{name:"Sintel (HLS, TS, 4k)",manifestUri:"https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",encoder:shakaAssets.Encoder.BITCODIN,source:shakaAssets.Source.BITCODIN,
drm:[],features:[shakaAssets.Feature.HIGH_DEFINITION,shakaAssets.Feature.HLS,shakaAssets.Feature.MP2TS,shakaAssets.Feature.ULTRA_HIGH_DEFINITION,shakaAssets.Feature.OFFLINE]},{name:"Big Buck Bunny",manifestUri:"https://video.wmspanel.com/local/raw/BigBuckBunny_320x180.mp4/manifest.mpd",disabled:!0,encoder:shakaAssets.Encoder.NIMBLE_STREAMER,source:shakaAssets.Source.NIMBLE_STREAMER,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE]},{name:"Azure Trailer",manifestUri:"https://amssamples.streaming.mediaservices.windows.net/91492735-c523-432b-ba01-faba6c2206a2/AzureMediaServicesPromo.ism/manifest(format=mpd-time-csf)",
encoder:shakaAssets.Encoder.AZURE_MEDIA_SERVICES,source:shakaAssets.Source.AZURE_MEDIA_SERVICES,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.OFFLINE]},{name:"Big Buck Bunny",manifestUri:"https://amssamples.streaming.mediaservices.windows.net/622b189f-ec39-43f2-93a2-201ac4e31ce1/BigBuckBunny.ism/manifest(format=mpd-time-csf)",encoder:shakaAssets.Encoder.AZURE_MEDIA_SERVICES,source:shakaAssets.Source.AZURE_MEDIA_SERVICES,drm:[shakaAssets.KeySystem.PLAYREADY,
shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.OFFLINE],licenseServers:{"com.widevine.alpha":"https://amssamples.keydelivery.mediaservices.windows.net/Widevine/?KID=1ab45440-532c-4399-94dc-5c5ad9584bac","com.microsoft.playready":"https://amssamples.keydelivery.mediaservices.windows.net/PlayReady/"}},{name:"Tears Of Steel (external text)",manifestUri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TearsOfSteel_WAMEH264SmoothStreaming720p.ism/manifest(format=mpd-time-csf)",
extraText:[{uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-en.vtt",language:"en",kind:"subtitle",mime:"text/vtt"},{uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-es.vtt",language:"es",kind:"subtitle",mime:"text/vtt"},{uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-fr.vtt",language:"fr",kind:"subtitle",mime:"text/vtt"}],encoder:shakaAssets.Encoder.AZURE_MEDIA_SERVICES,
source:shakaAssets.Source.AZURE_MEDIA_SERVICES,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_TIMELINE,shakaAssets.Feature.SUBTITLES,shakaAssets.Feature.WEBVTT,shakaAssets.Feature.OFFLINE]},{name:"live profile",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-live/mp4-live-mpd-AV-BS.mpd",disabled:!0,encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},
{name:"live profile with five periods",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-live-periods/mp4-live-periods-mpd.mpd",encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION,shakaAssets.Feature.OFFLINE]},{name:"main profile, single file",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-single/mp4-main-single-mpd-AV-NBS.mpd",
encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_LIST_DURATION,shakaAssets.Feature.OFFLINE]},{name:"main profile, mutiple files",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-multi/mp4-main-multi-mpd-AV-BS.mpd",disabled:!0,encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_LIST_DURATION]},
{name:"onDemand profile",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-onDemand/mp4-onDemand-mpd-AV.mpd",encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_BASE,shakaAssets.Feature.OFFLINE]},{name:"main profile, open GOP",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-ogop/mp4-main-ogop-mpd-AV-BS.mpd",disabled:!0,
encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},{name:"full profile, gradual decoding refresh",manifestUri:"https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-full-gdr/mp4-full-gdr-mpd-AV-BS.mpd",disabled:!0,encoder:shakaAssets.Encoder.MP4BOX,source:shakaAssets.Source.GPAC,drm:[],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.SEGMENT_TEMPLATE_DURATION]},
{name:"Multi DRM - 8 Byte IV",manifestUri:"https://content.uplynk.com/847859273a4b4a81959d8fea181672a4.mpd?pr.version=2&pr.playenabler=B621D91F-EDCC-4035-8D4B-DC71760D43E9&pr.securitylevel=150",encoder:shakaAssets.Encoder.UPLYNK,source:shakaAssets.Source.UPLYNK,drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.PSSH,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.AESCTR_8_BYTE_IV,shakaAssets.Feature.SEGMENT_LIST_DURATION,shakaAssets.Feature.HIGH_DEFINITION],
licenseServers:{"com.microsoft.playready":"https://content.uplynk.com/pr","com.widevine.alpha":"https://content.uplynk.com/wv"},requestFilter:shakaAssets.UplynkRequestFilter,responseFilter:shakaAssets.UplynkResponseFilter},{name:"Multi DRM - MultiPeriod - 8 Byte IV",manifestUri:"https://content.uplynk.com/054225d59be2454fabdca3e96912d847.mpd?ad=cleardash&pr.version=2&pr.playenabler=B621D91F-EDCC-4035-8D4B-DC71760D43E9&pr.securitylevel=150",encoder:shakaAssets.Encoder.UPLYNK,source:shakaAssets.Source.UPLYNK,
drm:[shakaAssets.KeySystem.PLAYREADY,shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.PSSH,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.SEGMENT_LIST_DURATION,shakaAssets.Feature.AESCTR_8_BYTE_IV,shakaAssets.Feature.HIGH_DEFINITION],licenseServers:{"com.microsoft.playready":"https://content.uplynk.com/pr","com.widevine.alpha":"https://content.uplynk.com/wv"},requestFilter:shakaAssets.UplynkRequestFilter,responseFilter:shakaAssets.UplynkResponseFilter},
{name:"Widevine - 16 Byte IV",manifestUri:"https://content.uplynk.com/224ac8717e714b68831997ab6cea4015.mpd",encoder:shakaAssets.Encoder.UPLYNK,source:shakaAssets.Source.UPLYNK,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.PSSH,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.AESCTR_16_BYTE_IV,shakaAssets.Feature.SEGMENT_LIST_DURATION,shakaAssets.Feature.HIGH_DEFINITION],licenseServers:{"com.widevine.alpha":"https://content.uplynk.com/wv"},requestFilter:shakaAssets.UplynkRequestFilter,
responseFilter:shakaAssets.UplynkResponseFilter},{name:"Widevine - 16 Byte IV - (mix of encrypted and unencrypted periods)",manifestUri:"https://content.uplynk.com/1eb40d8e64234f5c9879db7045c3d48c.mpd?ad=cleardash&rays=cdefg",encoder:shakaAssets.Encoder.UPLYNK,source:shakaAssets.Source.UPLYNK,drm:[shakaAssets.KeySystem.WIDEVINE],features:[shakaAssets.Feature.MP4,shakaAssets.Feature.MULTIPLE_LANGUAGES,shakaAssets.Feature.SEGMENT_LIST_DURATION,shakaAssets.Feature.PSSH,shakaAssets.Feature.HIGH_DEFINITION,
shakaAssets.Feature.MULTIPERIOD,shakaAssets.Feature.MULTIKEY,shakaAssets.Feature.AESCTR_16_BYTE_IV,shakaAssets.Feature.ENCRYPTED_WITH_CLEAR],licenseServers:{"com.widevine.alpha":"https://content.uplynk.com/wv"},requestFilter:shakaAssets.UplynkRequestFilter,responseFilter:shakaAssets.UplynkResponseFilter}];function ShakaControls(){this.enabled_=!0;this.castProxy_=null;this.castAllowed_=!0;this.player_=this.video_=this.onError_=null;this.videoContainer_=document.getElementById("videoContainer");this.controls_=document.getElementById("controls");this.playPauseButton_=document.getElementById("playPauseButton");this.seekBar_=document.getElementById("seekBar");this.muteButton_=document.getElementById("muteButton");this.volumeBar_=document.getElementById("volumeBar");this.captionButton_=document.getElementById("captionButton");
this.fullscreenButton_=document.getElementById("fullscreenButton");this.currentTime_=document.getElementById("currentTime");this.rewindButton_=document.getElementById("rewindButton");this.fastForwardButton_=document.getElementById("fastForwardButton");this.castButton_=document.getElementById("castButton");this.castReceiverName_=document.getElementById("castReceiverName");this.bufferingSpinner_=document.getElementById("bufferingSpinner");this.giantPlayButtonContainer_=document.getElementById("giantPlayButtonContainer");
this.isSeeking_=!1;this.trickPlayRate_=1;this.lastTouchEventTime_=this.mouseStillTimeoutId_=this.seekTimeoutId_=null}
ShakaControls.prototype.init=function(a,b,c){this.castProxy_=a;this.onError_=b;this.notifyCastStatus_=c;this.initMinimal(a.getVideo(),a.getPlayer());this.playPauseButton_.addEventListener("click",this.onPlayPauseClick_.bind(this));this.video_.addEventListener("play",this.onPlayStateChange_.bind(this));this.video_.addEventListener("pause",this.onPlayStateChange_.bind(this));this.video_.addEventListener("ended",this.onPlayStateChange_.bind(this));this.seekBar_.addEventListener("mousedown",this.onSeekStart_.bind(this));
this.seekBar_.addEventListener("touchstart",this.onSeekStart_.bind(this),{passive:!0});this.seekBar_.addEventListener("input",this.onSeekInput_.bind(this));this.seekBar_.addEventListener("touchend",this.onSeekEnd_.bind(this));this.seekBar_.addEventListener("mouseup",this.onSeekEnd_.bind(this));this.muteButton_.addEventListener("click",this.onMuteClick_.bind(this));this.volumeBar_.addEventListener("input",this.onVolumeInput_.bind(this));this.video_.addEventListener("volumechange",this.onVolumeStateChange_.bind(this));
this.onVolumeStateChange_();this.captionButton_.addEventListener("click",this.onCaptionClick_.bind(this));this.player_.addEventListener("texttrackvisibility",this.onCaptionStateChange_.bind(this));this.player_.addEventListener("trackschanged",this.onTracksChange_.bind(this));this.onCaptionStateChange_();this.fullscreenButton_.addEventListener("click",this.onFullscreenClick_.bind(this));this.currentTime_.addEventListener("click",this.onCurrentTimeClick_.bind(this));this.rewindButton_.addEventListener("click",
this.onRewindClick_.bind(this));this.fastForwardButton_.addEventListener("click",this.onFastForwardClick_.bind(this));this.castButton_.addEventListener("click",this.onCastClick_.bind(this));this.videoContainer_.addEventListener("touchstart",this.onContainerTouch_.bind(this),{passive:!1});this.videoContainer_.addEventListener("click",this.onContainerClick_.bind(this));this.controls_.addEventListener("click",function(a){a.stopPropagation()});this.videoContainer_.addEventListener("mousemove",this.onMouseMove_.bind(this));
this.videoContainer_.addEventListener("touchmove",this.onMouseMove_.bind(this),{passive:!0});this.videoContainer_.addEventListener("touchend",this.onMouseMove_.bind(this),{passive:!0});this.videoContainer_.addEventListener("mouseout",this.onMouseOut_.bind(this));this.castProxy_.addEventListener("caststatuschanged",this.onCastStatusChange_.bind(this));screen.orientation&&screen.orientation.addEventListener("change",this.onScreenRotation_.bind(this))};
ShakaControls.prototype.onScreenRotation_=function(){this.video_&&0!=this.video_.readyState&&!this.castProxy_.isCasting()&&(0<=screen.orientation.type.indexOf("landscape")&&!document.fullscreenElement?this.videoContainer_.requestFullscreen():0<=screen.orientation.type.indexOf("portrait")&&document.fullscreenElement&&document.exitFullscreen())};
ShakaControls.prototype.initMinimal=function(a,b){this.video_=a;this.player_=b;this.player_.addEventListener("buffering",this.onBufferingStateChange_.bind(this));window.setInterval(this.updateTimeAndSeekRange_.bind(this),125)};ShakaControls.prototype.allowCast=function(a){this.castAllowed_=a;this.onCastStatusChange_(null)};ShakaControls.prototype.loadComplete=function(){this.onPlayStateChange_()};
ShakaControls.prototype.setEnabled=function(a){(this.enabled_=a)?(this.controls_.parentElement.style.display="inherit",this.video_.controls=!1):(this.controls_.parentElement.style.display="none",this.video_.controls=!0);this.onPlayStateChange_()};
ShakaControls.prototype.onMouseMove_=function(a){"touchstart"==a.type||"touchmove"==a.type||"touchend"==a.type?this.lastTouchEventTime_=Date.now():this.lastTouchEventTime_+1E3<Date.now()&&(this.lastTouchEventTime_=null);this.lastTouchEventTime_&&"mousemove"==a.type||(this.videoContainer_.style.cursor="",this.controls_.style.opacity=1,this.updateTimeAndSeekRange_(),this.mouseStillTimeoutId_&&window.clearTimeout(this.mouseStillTimeoutId_),"touchend"!=a.type&&this.lastTouchEventTime_||(this.mouseStillTimeoutId_=
window.setTimeout(this.onMouseStill_.bind(this),3E3)))};ShakaControls.prototype.onMouseOut_=function(){this.lastTouchEventTime_||(this.mouseStillTimeoutId_&&window.clearTimeout(this.mouseStillTimeoutId_),this.onMouseStill_())};ShakaControls.prototype.onMouseStill_=function(){this.mouseStillTimeoutId_=null;this.videoContainer_.style.cursor="none";this.controls_.style.opacity=this.lastTouchEventTime_?"0":""};
ShakaControls.prototype.onContainerTouch_=function(a){this.video_.duration&&(1==this.controls_.style.opacity?this.lastTouchEventTime_=Date.now():(this.onMouseMove_(a),a.preventDefault()))};ShakaControls.prototype.onContainerClick_=function(a){if(this.enabled_)this.onPlayPauseClick_()};ShakaControls.prototype.onPlayPauseClick_=function(){this.enabled_&&this.video_.duration&&(this.player_.cancelTrickPlay(),this.trickPlayRate_=1,this.video_.paused?this.video_.play():this.video_.pause())};
ShakaControls.prototype.onPlayStateChange_=function(){this.video_.ended&&!this.video_.paused&&this.video_.pause();this.enabled_&&this.video_.paused&&!this.isSeeking_?(this.playPauseButton_.textContent="play_arrow",this.giantPlayButtonContainer_.style.display="inline"):(this.playPauseButton_.textContent="pause",this.giantPlayButtonContainer_.style.display="none")};ShakaControls.prototype.onSeekStart_=function(){this.enabled_&&(this.isSeeking_=!0,this.video_.pause())};
ShakaControls.prototype.onSeekInput_=function(){this.enabled_&&this.video_.duration&&(this.updateTimeAndSeekRange_(),null!=this.seekTimeoutId_&&window.clearTimeout(this.seekTimeoutId_),this.seekTimeoutId_=window.setTimeout(this.onSeekInputTimeout_.bind(this),125))};ShakaControls.prototype.onSeekInputTimeout_=function(){this.seekTimeoutId_=null;this.video_.currentTime=parseFloat(this.seekBar_.value)};
ShakaControls.prototype.onSeekEnd_=function(){this.enabled_&&(null!=this.seekTimeoutId_&&(window.clearTimeout(this.seekTimeoutId_),this.onSeekInputTimeout_()),this.isSeeking_=!1,this.video_.play())};ShakaControls.prototype.onMuteClick_=function(){this.enabled_&&(this.video_.muted=!this.video_.muted)};
ShakaControls.prototype.onVolumeStateChange_=function(){this.video_.muted?(this.muteButton_.textContent="volume_off",this.volumeBar_.value=0):(this.muteButton_.textContent="volume_up",this.volumeBar_.value=this.video_.volume);var a=["to right"];a.push("#ccc "+100*this.volumeBar_.value+"%");a.push("#000 "+100*this.volumeBar_.value+"%");a.push("#000 100%");this.volumeBar_.style.background="linear-gradient("+a.join(",")+")"};
ShakaControls.prototype.onVolumeInput_=function(){this.video_.volume=parseFloat(this.volumeBar_.value);this.video_.muted=!1};ShakaControls.prototype.onCaptionClick_=function(){this.enabled_&&this.player_.setTextTrackVisibility(!this.player_.isTextTrackVisible())};ShakaControls.prototype.onTracksChange_=function(){if(ShakaDemoUtils.isTsContent(this.player_))this.captionButton_.style.display="inherit";else{var a=this.player_.getTextTracks().length;this.captionButton_.style.display=a?"inherit":"none"}};
ShakaControls.prototype.onCaptionStateChange_=function(){this.player_.isTextTrackVisible()?this.captionButton_.style.color="white":this.captionButton_.style.color="rgba(255, 255, 255, 0.3)"};ShakaControls.prototype.onFullscreenClick_=function(){this.enabled_&&(document.fullscreenElement?document.exitFullscreen():this.videoContainer_.requestFullscreen())};ShakaControls.prototype.onCurrentTimeClick_=function(){this.enabled_&&this.player_.isLive()&&(this.video_.currentTime=this.seekBar_.max)};
ShakaControls.prototype.onRewindClick_=function(){this.enabled_&&this.video_.duration&&(this.trickPlayRate_=0<this.trickPlayRate_||-4>this.trickPlayRate_?-1:2*this.trickPlayRate_,this.player_.trickPlay(this.trickPlayRate_))};ShakaControls.prototype.onFastForwardClick_=function(){this.enabled_&&this.video_.duration&&(this.trickPlayRate_=0>this.trickPlayRate_||4<this.trickPlayRate_?1:2*this.trickPlayRate_,this.player_.trickPlay(this.trickPlayRate_))};
ShakaControls.prototype.onCastClick_=function(){this.enabled_&&(this.castProxy_.isCasting()?this.castProxy_.suggestDisconnect():(this.castButton_.disabled=!0,document.getElementById("loadButton").disabled=!0,document.getElementById("unloadButton").disabled=!0,this.castProxy_.cast().then(function(){document.getElementById("loadButton").disabled=!1;document.getElementById("unloadButton").disabled=!1;this.castButton_.disabled=!1}.bind(this),function(a){this.castButton_.disabled=!1;document.getElementById("loadButton").disabled=
!1;document.getElementById("unloadButton").disabled=!1;if(a.code!=shaka.util.Error.Code.CAST_CANCELED_BY_USER)this.onError_(a)}.bind(this))))};
ShakaControls.prototype.onCastStatusChange_=function(a){a=this.castProxy_.canCast()&&this.castAllowed_;var b=this.castProxy_.isCasting();this.notifyCastStatus_(b);this.castButton_.style.display=a?"inherit":"none";this.castButton_.textContent=b?"cast_connected":"cast";this.castReceiverName_.style.display=b?"inherit":"none";this.castReceiverName_.textContent=b?"Casting to "+this.castProxy_.receiverName():"";this.castProxy_.isCasting()?this.controls_.classList.add("casting"):this.controls_.classList.remove("casting")};
ShakaControls.prototype.onBufferingStateChange_=function(a){this.bufferingSpinner_.style.display=a.buffering?"inherit":"none"};ShakaControls.prototype.showTrickPlay=function(a){this.seekBar_.parentElement.style.width=a?"auto":"100%";this.seekBar_.style.display=a?"none":"flex";this.rewindButton_.style.display=a?"inline":"none";this.fastForwardButton_.style.display=a?"inline":"none"};
ShakaControls.prototype.isOpaque_=function(){if(!this.enabled_)return!1;if(this.castProxy_&&this.castProxy_.isCasting())return!0;var a=this.controls_.parentElement;return 1==this.controls_.style.opacity||a.querySelector("#controls:hover")==this.controls_};
ShakaControls.prototype.updateTimeAndSeekRange_=function(){if(this.isOpaque_()){var a=this.isSeeking_?this.seekBar_.value:this.video_.currentTime,b=this.video_.duration,c=this.video_.buffered.length,e=c?this.video_.buffered.start(0):0,d=c?this.video_.buffered.end(c-1):0,f=this.player_.seekRange(),g=f.end-f.start;this.seekBar_.min=f.start;this.seekBar_.max=f.end;this.player_.isLive()?(a=Math.max(0,Math.floor(f.end-a)),b=3600<=g,1<=a||this.isSeeking_?(this.currentTime_.textContent="- "+this.buildTimeString_(a,
b),this.currentTime_.style.cursor="pointer"):(this.currentTime_.textContent="LIVE",this.currentTime_.style.cursor=""),this.isSeeking_||(this.seekBar_.value=f.end-a)):(this.currentTime_.textContent=this.buildTimeString_(a,3600<=b),this.isSeeking_||(this.seekBar_.value=a),this.currentTime_.style.cursor="");b=["to right"];0==c?b.push("#000 0%"):(c=(Math.max(e,f.start)-f.start)/g||0,d=(Math.min(d,f.end)-f.start)/g||0,a=(a-f.start)/g||0,b.push("#000 "+100*c+"%"),b.push("#ccc "+100*c+"%"),b.push("#ccc "+
100*a+"%"),b.push("#444 "+100*a+"%"),b.push("#444 "+100*d+"%"),b.push("#000 "+100*d+"%"));this.seekBar_.style.background="linear-gradient("+b.join(",")+")"}};ShakaControls.prototype.buildTimeString_=function(a,b){var c=Math.floor(a/3600),e=Math.floor(a/60%60),d=Math.floor(a%60);10>d&&(d="0"+d);d=e+":"+d;b&&(10>e&&(d="0"+d),d=c+":"+d);return d};var ShakaDemoUtils={setupAssetMetadata:function(a,b){var c={drm:{},manifest:{dash:{}}};a.licenseServers&&(c.drm.servers=a.licenseServers);a.drmCallback&&(c.manifest.dash.customScheme=a.drmCallback);a.clearKeys&&(c.drm.clearKeys=a.clearKeys);b.configure(c);c=b.getNetworkingEngine();c.clearAllRequestFilters();c.clearAllResponseFilters();if(a.licenseRequestHeaders){var e=ShakaDemoUtils.addLicenseRequestHeaders_.bind(null,a.licenseRequestHeaders);c.registerRequestFilter(e)}a.requestFilter&&c.registerRequestFilter(a.requestFilter);
a.responseFilter&&c.registerResponseFilter(a.responseFilter);a.extraConfig&&b.configure(a.extraConfig)},addLicenseRequestHeaders_:function(a,b,c){if(b==shaka.net.NetworkingEngine.RequestType.LICENSE)for(var e in a)c.headers[e]=a[e]},isTsContent:function(a){return(a=a.getVariantTracks().filter(function(a){return 1==a.active})[0])?"video/mp2t"==a.mimeType:!1}};shakaDemo=shakaDemo||{};
shakaDemo.setupConfiguration_=function(){document.getElementById("smallGapLimit").addEventListener("input",shakaDemo.onGapInput_);document.getElementById("jumpLargeGaps").addEventListener("change",shakaDemo.onJumpLargeGapsChange_);document.getElementById("preferredAudioLanguage").addEventListener("input",shakaDemo.onConfigInput_);document.getElementById("preferredTextLanguage").addEventListener("input",shakaDemo.onConfigInput_);document.getElementById("preferredAudioChannelCount").addEventListener("input",shakaDemo.onConfigInput_);
document.getElementById("showNative").addEventListener("change",shakaDemo.onNativeChange_);document.getElementById("showTrickPlay").addEventListener("change",shakaDemo.onTrickPlayChange_);document.getElementById("enableAdaptation").addEventListener("change",shakaDemo.onAdaptationChange_);document.getElementById("logLevelList").addEventListener("change",shakaDemo.onLogLevelChange_);document.getElementById("enableLoadOnRefresh").addEventListener("change",shakaDemo.onLoadOnRefreshChange_);document.getElementById("drmSettingsVideoRobustness").addEventListener("input",
shakaDemo.onDrmSettingsChange_);document.getElementById("drmSettingsAudioRobustness").addEventListener("input",shakaDemo.onDrmSettingsChange_);document.getElementById("availabilityWindowOverride").addEventListener("input",shakaDemo.onAvailabilityWindowOverrideChange_);var a=document.getElementById("robustnessSuggestions");shakaDemo.support_.drm["com.widevine.alpha"]&&["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"].forEach(function(b){var c=document.createElement("option");
c.value=b;c.textContent="Widevine";a.appendChild(c)})};shakaDemo.onLoadOnRefreshChange_=function(){shakaDemo.hashShouldChange_()};shakaDemo.onDrmSettingsChange_=function(a){shakaDemo.hashShouldChange_()};shakaDemo.onAvailabilityWindowOverrideChange_=function(a){shakaDemo.hashShouldChange_()};
shakaDemo.onLogLevelChange_=function(a){if(shaka.log){switch(a.target[a.target.selectedIndex].value){case "info":shaka.log.setLevel(shaka.log.Level.INFO);break;case "debug":shaka.log.setLevel(shaka.log.Level.DEBUG);break;case "vv":shaka.log.setLevel(shaka.log.Level.V2);break;case "v":shaka.log.setLevel(shaka.log.Level.V1)}shakaDemo.hashShouldChange_()}};shakaDemo.onJumpLargeGapsChange_=function(a){shakaDemo.player_.configure({streaming:{jumpLargeGaps:a.target.checked}});shakaDemo.hashShouldChange_()};
shakaDemo.onGapInput_=function(a){var b=Number(a.target.value);a=isNaN(b)||0==a.target.value.length;shakaDemo.player_.configure({streaming:{smallGapLimit:a?void 0:b}});shakaDemo.hashShouldChange_()};
shakaDemo.onConfigInput_=function(a){a=Number(document.getElementById("preferredAudioChannelCount").value)||2;shakaDemo.player_.configure({preferredAudioLanguage:document.getElementById("preferredAudioLanguage").value,preferredTextLanguage:document.getElementById("preferredTextLanguage").value,preferredAudioChannelCount:a});shakaDemo.hashShouldChange_()};shakaDemo.onAdaptationChange_=function(a){shakaDemo.player_.configure({abr:{enabled:a.target.checked}});shakaDemo.hashShouldChange_()};
shakaDemo.onNativeChange_=function(a){var b=document.getElementById("showTrickPlay");a.target.checked?(b.checked=!1,b.disabled=!0,shakaDemo.controls_.showTrickPlay(!1),shakaDemo.controls_.setEnabled(!1)):(b.disabled=!1,shakaDemo.controls_.setEnabled(!0));shakaDemo.player_.configure({streaming:{alwaysStreamText:a.target.checked}});shakaDemo.hashShouldChange_()};shakaDemo.onTrickPlayChange_=function(a){shakaDemo.controls_.showTrickPlay(a.target.checked);shakaDemo.hashShouldChange_()};shakaDemo=shakaDemo||{};
shakaDemo.setupInfo_=function(){window.setInterval(shakaDemo.updateDebugInfo_,125);shakaDemo.player_.addEventListener("trackschanged",shakaDemo.onTracksChanged_);shakaDemo.player_.addEventListener("adaptation",shakaDemo.onAdaptation_);document.getElementById("variantTracks").addEventListener("change",shakaDemo.onTrackSelected_);document.getElementById("textTracks").addEventListener("change",shakaDemo.onTrackSelected_);document.getElementById("audioLanguages").addEventListener("change",shakaDemo.onAudioLanguageSelected_);
document.getElementById("textLanguages").addEventListener("change",shakaDemo.onTextLanguageSelected_)};shakaDemo.onTracksChanged_=function(a){shakaDemo.updateLanguages_();shakaDemo.updateVariantTracks_();shakaDemo.updateTextTracks_()};
shakaDemo.updateVariantTracks_=function(){var a=document.getElementById("variantTracks"),b=document.getElementById("audioLanguages");b=0<=b.selectedIndex?b.options[b.selectedIndex].value:"";var c=shakaDemo.player_.getVariantTracks();c.sort(function(a,b){return a.bandwidth-b.bandwidth});shakaDemo.updateTrackOptions_(a,c,b)};
shakaDemo.updateTextTracks_=function(){var a=document.getElementById("textTracks"),b=document.getElementById("textLanguages");b=0<=b.selectedIndex?b.options[b.selectedIndex].value:"";var c=shakaDemo.player_.getTextTracks();shakaDemo.updateTrackOptions_(a,c,b);0==c.length&&shakaDemo.player_.selectEmbeddedTextTrack();ShakaDemoUtils.isTsContent(shakaDemo.player_)&&(b=document.createElement("option"),b.textContent="Default Text",b.selected=shakaDemo.player_.usingEmbeddedTextTrack(),a.appendChild(b))};
shakaDemo.updateTrackOptions_=function(a,b,c){for(var e={variant:function(a){var b="";a.language&&(b+="language: "+a.language+", ");a.label&&(b+="label: "+a.label+", ");a.roles.length&&(b+="roles: ["+a.roles.join()+"], ");a.width&&a.height&&(b+=a.width+"x"+a.height+", ");a.channelsCount&&(b+="channels: "+a.channelsCount+", ");return b+=a.bandwidth+" bits/s"},text:function(a){var b="language: "+a.language+", ";a.label&&(b+="label: "+a.label+", ");a.roles.length&&(b+="roles: ["+a.roles.join()+"], ");
return b+="kind: "+a.kind}};a.firstChild;)a.removeChild(a.firstChild);c=c.split(":");var d=c[0],f=c[1]||"";b=b.filter(function(a){var b=a.language==d;a=""==f||-1<a.roles.indexOf(f);return b&&a});b.forEach(function(b){var c=document.createElement("option");c.textContent=e[b.type](b);c.track=b;c.value=b.id;c.selected=b.active;a.appendChild(c)})};shakaDemo.updateLanguages_=function(){shakaDemo.updateTextLanguages_();shakaDemo.updateAudioLanguages_()};
shakaDemo.updateTextLanguages_=function(){var a=shakaDemo.player_,b=document.getElementById("textLanguages"),c=a.getTextLanguagesAndRoles();a=a.getTextTracks();shakaDemo.updateLanguageOptions_(b,c,a)};shakaDemo.updateAudioLanguages_=function(){var a=shakaDemo.player_,b=document.getElementById("audioLanguages"),c=a.getAudioLanguagesAndRoles();a=a.getVariantTracks();shakaDemo.updateLanguageOptions_(b,c,a)};
shakaDemo.updateLanguageOptions_=function(a,b,c){for(;a.firstChild;)a.removeChild(a.firstChild);var e=c.filter(function(a){return 1==a.active})[0];b.forEach(function(b){var c=b.language,d=b.role;b=c;d&&(b+=" (role: "+d+")");var h=document.createElement("option");h.textContent=b;h.value=c+":"+d;var k=!1;e.language==c&&(e.roles.length?e.roles.forEach(function(a){a==d&&(k=!0)}):k=!0);h.selected=k;a.appendChild(h)})};
shakaDemo.onAdaptation_=function(a){var b=document.getElementById("variantTracks");shakaDemo.player_.getVariantTracks().forEach(function(a){if(a.active)for(var c=0;c<b.options.length;++c){var d=b.options[c];if(d.value==a.id){d.selected=!0;break}}})};
shakaDemo.onTrackSelected_=function(a){a=a.target;var b=a.options[a.selectedIndex],c=b.track,e=shakaDemo.player_;"variantTracks"==a.id?(e.configure({abr:{enabled:!1}}),e.selectVariantTrack(c,!0)):"Default Text"==b.textContent?e.selectEmbeddedTextTrack():e.selectTextTrack(c);a=e.getConfiguration().abr.enabled;document.getElementById("enableAdaptation").checked=a};
shakaDemo.onAudioLanguageSelected_=function(a){var b=a.target;a=shakaDemo.player_;b=b.options[b.selectedIndex].value.split(":");a.selectAudioLanguage(b[0],b[1]||"");shakaDemo.updateVariantTracks_()};shakaDemo.onTextLanguageSelected_=function(a){var b=a.target;a=shakaDemo.player_;b=b.options[b.selectedIndex].value.split(":");a.selectTextLanguage(b[0],b[1]||"");shakaDemo.updateTextTracks_()};
shakaDemo.updateDebugInfo_=function(){var a=shakaDemo.video_;document.getElementById("videoResDebug").textContent=a.videoWidth+" x "+a.videoHeight;var b=0,c=0,e=a.currentTime;a=a.buffered;for(var d=0;d<a.length;++d)if(a.start(d)<=e&&a.end(d)>=e){c=a.end(d)-e;b=e-a.start(d);break}document.getElementById("bufferedDebug").textContent="- "+b.toFixed(0)+"s / + "+c.toFixed(0)+"s"};shakaDemo=shakaDemo||{};shakaDemo.originalConsoleMethods_={error:function(){},warn:function(){},info:function(){},log:function(){},debug:function(){}};shakaDemo.patchedConsoleMethods_={error:function(){},warn:function(){},info:function(){},log:function(){},debug:function(){}};
shakaDemo.setupLogging_=function(){var a=document.getElementById("logToScreen"),b=document.getElementById("log");shaka.log?Object.keys&&window.console&&console.log&&console.log.bind&&(Object.keys(shakaDemo.originalConsoleMethods_).forEach(function(a){var c=console[a].bind(console),d=a+"Log";shakaDemo.originalConsoleMethods_[a]=c;shakaDemo.patchedConsoleMethods_[a]=function(){c.apply(console,arguments);shakaDemo.formatLog_(b,d,arguments)}}),a.addEventListener("change",shakaDemo.onLogChange_),shakaDemo.onLogChange_()):
a.parentElement.style.display="none"};shakaDemo.onLogChange_=function(){if(shaka.log){var a=document.getElementById("logToScreen"),b=document.getElementById("logSection");if(a.checked){b.style.display="block";b.open=!0;for(var c in shakaDemo.patchedConsoleMethods_)console[c]=shakaDemo.patchedConsoleMethods_[c]}else{b.style.display="none";for(var e in shakaDemo.originalConsoleMethods_)console[e]=shakaDemo.originalConsoleMethods_[e]}shaka.log.setLevel(shaka.log.currentLevel);shakaDemo.hashShouldChange_()}};
shakaDemo.formatLog_=function(a,b,c){var e=document.createElement("div");e.className=b;for(b=0;b<c.length;++b){var d=document.createElement("span"),f=c[b];var g=null===f?"null":void 0===f?"undefined":f.toString();if(Array.isArray(f)||"[object Object]"==g)g=JSON.stringify(f);d.textContent=g;e.appendChild(d)}a.appendChild(e);a.scrollTop=a.scrollHeight};shakaDemo=shakaDemo||{};shakaDemo.castProxy_=null;shakaDemo.video_=null;shakaDemo.player_=null;shakaDemo.localVideo_=null;shakaDemo.localPlayer_=null;shakaDemo.controls_=null;shakaDemo.hashCanChange_=!1;shakaDemo.suppressHashChangeEvent_=!1;shakaDemo.startTime_=void 0;shakaDemo.mainPoster_="https://shaka-player-demo.appspot.com/assets/poster.jpg";shakaDemo.audioOnlyPoster_="https://shaka-player-demo.appspot.com/assets/audioOnly.gif";shakaDemo.CC_APP_ID_="00A3C5E8";
shakaDemo.init=function(){document.getElementById("errorDisplayCloseButton").addEventListener("click",shakaDemo.closeError);document.getElementById("version").textContent=shaka.Player.version;var a=navigator.language||"en-us";document.getElementById("preferredAudioLanguage").value=a;document.getElementById("preferredTextLanguage").value=a;document.getElementById("preferredAudioChannelCount").value="2";var b=shakaDemo.getParams_();shakaDemo.setupLogging_();shakaDemo.preBrowserCheckParams_(b);shaka.polyfill.installAll();
window.addEventListener("error",function(a){shakaDemo.onError_(a.error)});shaka.Player.isBrowserSupported()?(navigator.serviceWorker&&(console.debug("Registering service worker."),navigator.serviceWorker.register("service_worker.js").then(function(a){console.debug("Service worker registered!",a.scope)})["catch"](function(a){console.error("Service worker registration failed!",a)})),a=function(a){a=document.getElementById("version");var b=a.textContent;b=b.replace(" (offline)","");navigator.onLine||
(b+=" (offline)");a.textContent=b;shakaDemo.computeDisabledAssets()},window.addEventListener("online",a),window.addEventListener("offline",a),a(null),shaka.Player.probeSupport().then(function(a){shakaDemo.support_=a;a=document.getElementById("video");var c=new shaka.Player(a);shakaDemo.castProxy_=new shaka.cast.CastProxy(a,c,shakaDemo.CC_APP_ID_);shakaDemo.video_=shakaDemo.castProxy_.getVideo();shakaDemo.player_=shakaDemo.castProxy_.getPlayer();shakaDemo.player_.addEventListener("error",shakaDemo.onErrorEvent_);
shakaDemo.localVideo_=a;shakaDemo.localPlayer_=c;shakaDemo.localVideo_.poster=shakaDemo.mainPoster_;a=shakaDemo.setupAssets_();shakaDemo.setupOffline_();shakaDemo.setupConfiguration_();shakaDemo.setupInfo_();shakaDemo.controls_=new ShakaControls;shakaDemo.controls_.init(shakaDemo.castProxy_,shakaDemo.onError_,shakaDemo.onCastStatusChange_);a["catch"](function(a){shakaDemo.onError_(a)}).then(function(){shakaDemo.postBrowserCheckParams_(b);window.addEventListener("hashchange",shakaDemo.updateFromHash_)})})["catch"](function(a){shakaDemo.onError_(a)})):
(a=document.getElementById("errorDisplayLink"),void 0===a.textContent?a.innerText="Your browser is not supported!":a.textContent="Your browser is not supported!",document.getElementById("loadButton").disabled=!0,document.getElementById("unloadButton").disabled=!0,document.getElementById("errorDisplayCloseButton").style.display="none",a.style.fontSize="250%",a.href="#",a.style.pointerEvents="none",a.style.textDecoration="none",a.style.cursor="default",a.onclick=function(){return!1},document.getElementById("errorDisplay").style.display=
"block")};shakaDemo.getParams_=function(){var a=location.search.substr(1);a=a?a.split(";"):[];var b=location.hash.substr(1);b=b?b.split(";"):[];a=a.concat(b);b={};for(var c=0;c<a.length;++c){var e=a[c].split("=");b[e[0]]=e.slice(1).join("=")}return b};
shakaDemo.preBrowserCheckParams_=function(a){"videoRobustness"in a&&(document.getElementById("drmSettingsVideoRobustness").value=a.videoRobustness);"audioRobustness"in a&&(document.getElementById("drmSettingsAudioRobustness").value=a.audioRobustness);"lang"in a&&(document.getElementById("preferredAudioLanguage").value=a.lang,document.getElementById("preferredTextLanguage").value=a.lang);"audiolang"in a&&(document.getElementById("preferredAudioLanguage").value=a.audiolang);"textlang"in a&&(document.getElementById("preferredTextLanguage").value=
a.textlang);"channels"in a&&(document.getElementById("preferredAudioChannelCount").value=a.channels);"asset"in a&&(document.getElementById("manifestInput").value=a.asset);"license"in a&&(document.getElementById("licenseServerInput").value=a.license);"certificate"in a&&(document.getElementById("certificateInput").value=a.certificate);"availabilityWindowOverride"in a&&(document.getElementById("availabilityWindowOverride").value=a.availabilityWindowOverride);"logtoscreen"in a&&(document.getElementById("logToScreen").checked=
!0,shakaDemo.onLogChange_());"noinput"in a&&(document.getElementById("container").className="noinput",document.body.className="noinput");"play"in a&&(document.getElementById("enableLoadOnRefresh").checked=!0);"startTime"in a&&(shakaDemo.startTime_=parseInt(a.startTime,10));if(shaka.log){document.getElementById("logLevelListDiv").hidden=!1;if("vv"in a){var b="vv";shaka.log.setLevel(shaka.log.Level.V2)}else"v"in a?(b="v",shaka.log.setLevel(shaka.log.Level.V1)):"debug"in a&&(b="debug",shaka.log.setLevel(shaka.log.Level.DEBUG));
if(b){a=document.getElementById("logLevelList");for(var c=0;c<a.length;c++)if(a[c].value==b){a.selectedIndex=c;break}}}};shakaDemo.licenseServerMatch_=function(a,b){if(!b)return!0;if(b&&!a.licenseServers)return!1;for(var c in a.licenseServers)if(b==a.licenseServers[c])return!0;return!1};
shakaDemo.postBrowserCheckParams_=function(a){if("asset"in a){for(var b=document.getElementById("assetList"),c=a.asset,e=a.license,d=!1,f=0;f<b.options.length-1;f++)if(b[f].asset&&b[f].asset.manifestUri==c&&shakaDemo.licenseServerMatch_(b[f].asset,e)){b.selectedIndex=f;d=!0;break}d?(document.getElementById("manifestInput").value="",document.getElementById("licenseServerInput").value=""):(b.selectedIndex=b.options.length-1,document.getElementById("customAsset").style.display="block");shakaDemo.updateButtons_(!0)}b=
document.getElementById("smallGapLimit");b.placeholder=.5;"smallGapLimit"in a&&(b.value=a.smallGapLimit,shakaDemo.onGapInput_({target:b}));b=document.getElementById("jumpLargeGaps");"jumpLargeGaps"in a?(b.checked=!0,shakaDemo.onJumpLargeGapsChange_({target:b})):b.checked=shakaDemo.player_.getConfiguration().streaming.jumpLargeGaps;"noadaptation"in a&&(b=document.getElementById("enableAdaptation"),b.checked=!1,shakaDemo.onAdaptationChange_({target:b}));"trickplay"in a&&(b=document.getElementById("showTrickPlay"),
b.checked=!0,shakaDemo.onTrickPlayChange_({target:b}));"nativecontrols"in a&&(b=document.getElementById("showNative"),b.checked=!0,shakaDemo.onNativeChange_({target:b}));shakaDemo.hashCanChange_=!0;shakaDemo.hashShouldChange_();("noinput"in a||"play"in a)&&shakaDemo.load()};shakaDemo.updateFromHash_=function(){if(shakaDemo.suppressHashChangeEvent_)shakaDemo.suppressHashChangeEvent_=!1;else{var a=shakaDemo.getParams_();shakaDemo.preBrowserCheckParams_(a);shakaDemo.postBrowserCheckParams_(a)}};
shakaDemo.hashShouldChange_=function(){if(shakaDemo.hashCanChange_){var a=[],b=shakaDemo.getParams_();if(shakaDemo.player_){var c=shakaDemo.player_.getManifestUri();var e=shakaDemo.player_.drmInfo();if(e)var d=e.licenseServerUri}e=document.getElementById("assetList");if(c){a.push("asset="+c);for(var f=!1,g=0;g<e.options.length-1;g++)if(e[g].asset.manifestUri==c){f=!0;break}!f&&d&&a.push("license="+d)}else e.selectedIndex==e.length-1?((c=document.getElementById("manifestInput").value)&&a.push("asset="+
c),(c=document.getElementById("licenseServerInput").value)&&a.push("license="+c),(c=document.getElementById("certificateInput").value)&&a.push("certificate="+c)):a.push("asset="+e[e.selectedIndex].asset.manifestUri);document.getElementById("smallGapLimit").value.length&&a.push("smallGapLimit="+document.getElementById("smallGapLimit").value);document.getElementById("jumpLargeGaps").checked&&a.push("jumpLargeGaps");c=document.getElementById("preferredAudioLanguage").value;d=document.getElementById("preferredTextLanguage").value;
d!=c?(a.push("audiolang="+c),a.push("textlang="+d)):a.push("lang="+c);c=document.getElementById("preferredAudioChannelCount").value;"2"!=c&&a.push("channels="+c);document.getElementById("logToScreen").checked&&a.push("logtoscreen");document.getElementById("enableAdaptation").checked||a.push("noadaptation");document.getElementById("showTrickPlay").checked&&a.push("trickplay");document.getElementById("showNative").checked&&a.push("nativecontrols");(c=document.getElementById("availabilityWindowOverride").value)&&
a.push("availabilityWindowOverride="+c);shaka.log&&(c=document.getElementById("logLevelList"),c=c[c.selectedIndex].value,"info"!=c&&a.push(c));document.getElementById("enableLoadOnRefresh").checked&&a.push("play");"noinput"in b&&a.push("noinput");void 0!=shakaDemo.startTime_&&a.push("startTime="+shakaDemo.startTime_);(c=document.getElementById("drmSettingsVideoRobustness").value)&&a.push("videoRobustness="+c);(c=document.getElementById("drmSettingsAudioRobustness").value)&&a.push("audioRobustness="+
c);var h="uncompiled",k="#"+a.join(";");"build"in b?(a.push("build="+b.build),h=b.build):"compiled"in b&&(a.push("build=compiled"),h="compiled");["compiled","debug_compiled","uncompiled"].forEach(function(a){var b=document.getElementById(a+"_link");h==a?(b.classList.add("disabled_link"),b.removeAttribute("href"),b.title="currently selected"):(b.classList.remove("disabled_link"),b.onclick=function(){location.hash=k+";build="+a;location.reload();return!1})});window.shakaUncompiledModeSupported()||(b=
document.getElementById("uncompiled_link"),b.classList.add("disabled_link"),b.removeAttribute("href"),b.title="requires a newer browser",b.onclick=null);a="#"+a.join(";");a!=location.hash&&(shakaDemo.suppressHashChangeEvent_=!0,location.hash=a);location.search&&(location.search="")}};shakaDemo.onErrorEvent_=function(a){shakaDemo.onError_(a.detail)};
shakaDemo.onError_=function(a){console.error("Player error",a);var b=document.getElementById("errorDisplayLink");null==a.severity&&(a.severity=99);if(null==b.severity||a.severity>b.severity){var c=a.message||"Error code "+a.code;b.href=a.code?"../docs/api/shaka.util.Error.html#value:"+a.code:"";b.textContent=c;b.severity=a.severity||99;b.style.pointerEvents=a.code?"auto":"none";document.getElementById("errorDisplay").style.display="block"}};
shakaDemo.closeError=function(){document.getElementById("errorDisplay").style.display="none";var a=document.getElementById("errorDisplayLink");a.href="";a.textContent="";a.severity=null};if("loading"==document.readyState||"interactive"==document.readyState)window.attachEvent?window.attachEvent("onload",shakaDemo.init):window.addEventListener("load",shakaDemo.init);else{var pollForShakaPlayer=function(){window.shaka?shakaDemo.init():setTimeout(pollForShakaPlayer,100)};pollForShakaPlayer()};shakaDemo=shakaDemo||{};shakaDemo.offlineOptGroup_=null;shakaDemo.offlineOperationInProgress_=!1;
shakaDemo.updateButtons_=function(a){var b=document.getElementById("assetList"),c=shakaDemo.offlineOperationInProgress_;document.getElementById("progressDiv").style.display=a&&!c?"none":"block";a=b.options[b.selectedIndex];var e=a.storedContent,d=b=!0,f=!0;a.asset&&a.asset.drm&&a.asset.drm.length&&(b=a.asset.drm.some(function(a){return shakaDemo.support_.drm[a]&&shakaDemo.support_.drm[a].persistentState}),d=Object.keys(shakaDemo.support_.drm).some(function(a){return shakaDemo.support_.drm[a]&&shakaDemo.support_.drm[a].persistentState}));
a.asset&&a.asset.features&&(a.asset.features.includes(shakaAssets.Feature.OFFLINE)||(f=!1));document.getElementById("offlineNameDiv").style.display=a.asset?"none":"block";var g=document.getElementById("storeDeleteButton");g.disabled=!1;g.textContent=e?"Delete":"Store";e=document.getElementById("storeDeleteHelpText");c?(g.disabled=!0,e.textContent="Operation is in progress..."):d?b?a.isStored?(g.disabled=!0,e.textContent='The asset is stored offline. Checkout the "Offline" section in the "Asset" list'):
f?e.textContent="":(g.disabled=!0,e.textContent="The asset does not support offline storage."):(g.disabled=!0,e.textContent="This browser does not support persistent licenses for any DRM system in this asset."):(g.disabled=!0,e.textContent="This browser does not support persistent licenses.")};
shakaDemo.setupOffline_=function(){document.getElementById("storeDeleteButton").addEventListener("click",shakaDemo.storeDeleteAsset_);document.getElementById("assetList").addEventListener("change",shakaDemo.updateButtons_.bind(null,!0));shakaDemo.updateButtons_(!0)};
shakaDemo.setupOfflineAssets_=function(){var a=shaka.offline.Storage;if(!a.support())return document.getElementById("offlineSection").style.display="none",Promise.resolve();var b=document.getElementById("assetList");if(shakaDemo.offlineOptGroup_)var c=shakaDemo.offlineOptGroup_;else c=document.createElement("optgroup"),shakaDemo.offlineOptGroup_=c,c.label="Offline",b.appendChild(c);var e=new a(shakaDemo.localPlayer_);return e.list().then(function(a){a.forEach(function(a){for(var d=0;d<b.options.length;d++){var e=
b.options[d];if(e.asset&&e.asset.manifestUri==a.originalManifestUri){e.isStored=!0;break}}d={manifestUri:a.offlineUri};e=document.createElement("option");e.textContent=a.appMetadata?a.appMetadata.name:"";e.asset=d;e.storedContent=a;c.appendChild(e)});shakaDemo.updateButtons_(!0);return e.destroy()})};
shakaDemo.storeDeleteAsset_=function(){shakaDemo.closeError();shakaDemo.offlineOperationInProgress_=!0;shakaDemo.updateButtons_(!1);var a=document.getElementById("assetList"),b=document.getElementById("progress"),c=a.options[a.selectedIndex];b.textContent="0";var e=new shaka.offline.Storage(shakaDemo.localPlayer_);e.configure({progressCallback:function(a,c){b.textContent=(100*c).toFixed(2)}});if(c.storedContent){var d=c.storedContent.offlineUri;for(var f=c.storedContent.originalManifestUri,g=0;g<
shakaAssets.testAssets.length;g++){var h=shakaAssets.testAssets[g];if(f==h.manifestUri){shakaDemo.preparePlayer_(h);break}}d=e.remove(d).then(function(){for(var b=0;b<a.options.length;b++){var c=a.options[b];c.asset&&c.asset.manifestUri==f&&(c.isStored=!1)}return shakaDemo.refreshAssetList_()})}else{d=shakaDemo.preparePlayer_(c.asset);g=document.getElementById("offlineName").value;var k=d.name?"[OFFLINE] "+d.name:null;d=e.store(d.manifestUri,{name:k||g||d.manifestUri}).then(function(){c.asset&&(c.isStored=
!0);return shakaDemo.refreshAssetList_().then(function(){for(var b=shakaDemo.offlineOptGroup_,c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];d.textContent==k&&(a.selectedIndex=d.index)}})})}d["catch"](function(a){shakaDemo.onError_(a)}).then(function(){shakaDemo.offlineOperationInProgress_=!1;shakaDemo.updateButtons_(!0);return e.destroy()})};shakaDemo.refreshAssetList_=function(){for(var a=shakaDemo.offlineOptGroup_;a.firstChild;)a.removeChild(a.firstChild);return shakaDemo.setupOfflineAssets_()};
shakaDemo.onCastStatusChange_=function(a){shakaDemo.offlineOptGroup_&&(shakaDemo.offlineOptGroup_.disabled=a)&&(a=document.getElementById("assetList"),a.options[a.selectedIndex].storedContent&&(a.selectedIndex=0))};
//# sourceMappingURL=demo.compiled.map